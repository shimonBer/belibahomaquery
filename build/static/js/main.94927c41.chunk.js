(this.webpackJsonpqueryfront=this.webpackJsonpqueryfront||[]).push([[0],{127:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(11),o=t.n(l),c=(t(95),t(96),t(10)),i=t.n(c),u=t(16),m=t(20),s=t(31),p=t.n(s),d=t(72);function v(){return d.PROD_SERVER_ADDRESS}var g=function(){var e=Object(u.a)(i.a.mark((function e(a){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v(),e.next=3,p()({method:"post",url:"".concat(t,"/api/auth/login"),data:a,headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),f=t(179),h=t(167),b=t(165),E=t(175),y=t(166),x=t(177),w=t(162),k=t(168),S=t(176),j=t(37),O=t(163),C=t(164);function T(){return r.a.createElement(j.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(w.a,{color:"inherit",href:"https://material-ui.com/"},"Beliba Homa")," ",(new Date).getFullYear(),".")}var N=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function R(e){var a=Object(n.useState)(""),t=Object(m.a)(a,2),l=t[0],o=t[1],c=Object(n.useState)(""),s=Object(m.a)(c,2),p=s[0],d=s[1],v=N(),O=function(){var a=Object(u.a)(i.a.mark((function a(t){var n;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,g({email:l,password:p});case 4:200<=(n=a.sent).status<=300&&(localStorage.setItem("query-auth-token",n.data.token),e.history.push("/reports")),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(C.a,{component:"main",maxWidth:"xs"},r.a.createElement(b.a,null),r.a.createElement("div",{className:v.paper},r.a.createElement(f.a,{className:v.avatar}),r.a.createElement(j.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:v.form,onSubmit:O,noValidate:!0},r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){o(e.target.value)}}),r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){d(e.target.value)}}),r.a.createElement(y.a,{control:r.a.createElement(x.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:v.submit},"Sign In"),r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,xs:!0},r.a.createElement(w.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(k.a,{item:!0},r.a.createElement(w.a,{to:"/register",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(S.a,{mt:8},r.a.createElement(T,null)))}var W=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function q(){var e=W();return r.a.createElement(C.a,{component:"main",maxWidth:"xs"},r.a.createElement(b.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(f.a,{className:e.avatar}),r.a.createElement(j.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(k.a,{container:!0,spacing:2},r.a.createElement(k.a,{item:!0,xs:12,sm:6},r.a.createElement(E.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})),r.a.createElement(k.a,{item:!0,xs:12,sm:6},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname"})),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"})),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(y.a,{control:r.a.createElement(x.a,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive inspiration, marketing promotions and updates via email."}))),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign Up"),r.a.createElement(k.a,{container:!0,justify:"flex-end"},r.a.createElement(k.a,{item:!0},r.a.createElement(w.a,{to:"/login",variant:"body2"},"Already have an account? Sign in"))))),r.a.createElement(S.a,{mt:5},r.a.createElement(T,null)))}var D=t(39),I=t(29),B=t(73),F=v(),A=function(){var e=Object(u.a)(i.a.mark((function e(a,t){var n,r,l,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={"Content-Type":"blob","x-access-token":localStorage.getItem("query-auth-token")},r={method:"GET",url:"".concat(F,"/api/reports/staticReport/get?reportId=").concat(t),responseType:"arraybuffer",headers:n},e.prev=2,e.next=5,p()(r);case 5:if(!((l=e.sent).data.byteLength<100)){e.next=9;break}return alert("Report is not ready yet, try again in 30 seconds"),e.abrupt("return");case 9:o="".concat(a.reportType,".xlsx"),c=URL.createObjectURL(new Blob([l.data])),(u=document.createElement("a")).href=c,u.setAttribute("download",o),document.body.appendChild(u),u.click(),e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(2),Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(a,t){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,p()({method:"get",url:"".concat(F,"/api/reports/staticReport?reportType=").concat(a.reportType,"&from=").concat(a.fromYear,"-").concat(a.fromMonth,"&to=").concat(a.toYear,"-").concat(a.toMonth),headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("query-auth-token")}});case 3:if(!(t=e.sent)){e.next=6;break}return e.abrupt("return",null===t||void 0===t?void 0:t.data);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),M=t(169),V=t(171),Y=t(174),_=t(173),H=t(172),L=t(170);t(74);t(76);t(121);var U=Object(O.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap"},toolbarTitle:{flexGrow:1},link:{margin:e.spacing(1,1.5)},heroContent:{padding:e.spacing(8,0,6)},cardHeader:{backgroundColor:"dark"===e.palette.type?e.palette.grey[700]:e.palette.grey[200]},cardPricing:{display:"flex",justifyContent:"center",alignItems:"baseline",marginBottom:e.spacing(2)},footer:Object(B.a)({borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.up("sm"),{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)})}}));function G(e){var a=Object(n.useState)((new Date).getMonth+1),t=Object(m.a)(a,2),l=(t[0],t[1],Object(n.useState)((new Date).getFullYear())),o=Object(m.a)(l,2),c=(o[0],o[1],Object(n.useState)([])),s=Object(m.a)(c,2),p=(s[0],s[1],Object(n.useState)("1")),d=Object(m.a)(p,2),v=d[0],g=d[1],f=Object(n.useState)("12"),E=Object(m.a)(f,2),y=E[0],x=E[1],w=Object(n.useState)("2022"),O=Object(m.a)(w,2),N=O[0],R=O[1],W=Object(n.useState)("2022"),q=Object(m.a)(W,2),D=q[0],I=q[1],B=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"}],F=[{value:"2019",label:"2019"},{value:"2020",label:"2020"},{value:"2021",label:"2021"},{value:"2022",label:"2022"},{value:"2023",label:"2023"},{value:"2024",label:"2024"},{value:"2025",label:"2025"}],G=function(){var e=Object(u.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P({fromMonth:v,fromYear:N,toMonth:y,toYear:D,reportType:a});case 3:t=e.sent,localStorage.setItem(a,t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),$();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(a),e.next=4,A({reportType:a},t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),$();case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}(),K=U(),$=function(){localStorage.removeItem("query-auth-token"),e.history.push("/login")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null),r.a.createElement(M.a,{position:"static",color:"default",elevation:0,className:K.appBar},r.a.createElement(L.a,{className:K.toolbar},r.a.createElement(j.a,{variant:"h6",align:"left",color:"inherit",noWrap:!0,className:K.toolbarTitle},"Beliba Homa Reports"),r.a.createElement(h.a,{onClick:$,color:"primary",variant:"outlined",className:K.link},"Logout"))),r.a.createElement(C.a,{maxWidth:"sm",component:"main",className:K.heroContent},r.a.createElement(j.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Monthly Reports"),r.a.createElement(j.a,{variant:"h5",align:"center",color:"textSecondary",component:"p"},"Choose your form out of the following options:")),r.a.createElement(C.a,{maxWidth:"md",component:"main"},r.a.createElement(k.a,{container:!0,spacing:5,alignItems:"flex-end","justify-content":"center","flex-wrap":"wrap"},["queryTutorsHours","quaterlyKivunReport","allTrainees","allTutors"].map((function(e){return r.a.createElement(k.a,{key:e,item:!0,md:4},r.a.createElement(V.a,null,r.a.createElement(H.a,{title:e,titleTypographyProps:{align:"center"},subheaderTypographyProps:{align:"center"},className:K.cardHeader}),r.a.createElement(_.a,null,r.a.createElement("div",null,r.a.createElement("h3",null,"From month:"),r.a.createElement("select",{onChange:function(e){return g(e.target.value)},value:v},B.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))),r.a.createElement("h3",null,"From year:"),r.a.createElement("select",{onChange:function(e){return R(e.target.value)},value:N},F.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))),r.a.createElement("br",null),r.a.createElement("h3",null,"To month:"),r.a.createElement("select",{onChange:function(e){return x(e.target.value)},value:y},B.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))),r.a.createElement("h3",null,"To year:"),r.a.createElement("select",{onChange:function(e){return I(e.target.value)},value:D},F.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),r.a.createElement(Y.a,null,r.a.createElement(h.a,{onClick:function(){return G(e)},fullWidth:!0,variant:"contained",color:"primary"},"Generate Report")),r.a.createElement(Y.a,null,r.a.createElement(h.a,{onClick:function(){return J(e)},fullWidth:!0,variant:"contained",color:"Secondary"},"Download Report"))))})))),r.a.createElement(C.a,{maxWidth:"md",component:"footer",className:K.footer},r.a.createElement(S.a,{mt:5},r.a.createElement(T,null))))}function J(e){return localStorage.getItem("query-auth-token")?r.a.createElement(I.b,e):r.a.createElement(I.a,{to:"/login"})}function K(e){return localStorage.getItem("query-auth-token")?r.a.createElement(I.a,{to:"/reports"}):r.a.createElement(I.b,e)}var $=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(D.a,null,r.a.createElement(I.d,null,r.a.createElement(K,{exact:!0,path:"/",component:R}),r.a.createElement(J,{exact:!0,path:"/reports",component:G}),r.a.createElement(K,{exact:!0,path:"/login",component:R}),r.a.createElement(K,{exact:!0,path:"/register",component:q}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,a){e.exports={PROD_SERVER_ADDRESS:"https://belibahomaquerynode.herokuapp.com",DEV_SERVER_ADDRESS:"http://localhost:3000"}},90:function(e,a,t){e.exports=t(127)},95:function(e,a,t){},96:function(e,a,t){}},[[90,1,2]]]);
//# sourceMappingURL=main.94927c41.chunk.js.map